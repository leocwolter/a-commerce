<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Home</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
</head>
<body>
	<ui:include src="/WEB-INF/partials/_menu.xhtml"/>
    <f:view locale="#{facesContext.externalContext.requestLocale}">
	
		<div class="container-fluid">
			<ul class="row list-unstyled">
				<ui:repeat value="#{searchBean.result}" var="book" varStatus="status">
					<li class="col-sm-5 col-md-3 text-center">
						<div class="thumbnail">
							<div class="caption">
								<h:panelGroup rendered="#{userSessionBean.logged}">
									<h:form rendered="#{!wishListBean.contains(book)}">
										<h:commandLink styleClass="pull-right" action="#{wishListBean.add(book)}">
											<span class="glyphicon glyphicon glyphicon-heart-empty" />
										</h:commandLink>
									</h:form>
									<h:form rendered="#{wishListBean.contains(book)}">
										<h:commandLink styleClass="pull-right" action="#{wishListBean.remove(book)}">
											<span class="glyphicon glyphicon glyphicon-heart" />
										</h:commandLink>
									</h:form>
								</h:panelGroup>
								
								<h3>#{book.name}</h3>
								<p>
							        <h:outputText value="#{book.price}" >
										<f:convertNumber type="currency" value="#{book.price}" minFractionDigits="2" />
						            </h:outputText>
								</p>
								<p>
									<h:form>
										<h:commandLink styleClass="btn btn-primary" action="#{cartBean.add}" value="#{msgs.buy}">
											<f:setPropertyActionListener value="#{book}" target="#{cartBean.book}"/>
										</h:commandLink>
									</h:form>
									<h:link outcome="show" value="#{msgs.details}">
										<f:param styleClass="btn btn-default" name="id" value="#{book.id}"/>
									</h:link>
								</p>
								
							</div>
						</div>
					</li>
				</ui:repeat>
			</ul>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	</f:view>
</body>
</html>